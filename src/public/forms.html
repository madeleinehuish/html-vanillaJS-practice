<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="styles/style.css" />
<title>forms page</title>
</head>
<body>
	<nav>
		<div class="left-nav-container">
			<ul>
				<li><a href="index.html">home</a></li>
				<li><a href="lists.html">lists</a></li>
				<li><a href="jquery.html">jquery</a></li>
				<!-- <li><a href="forms2.html">forms2</a></li>
				<li><a href="forms3.html">forms3</a></li> -->
				<li class="dropDown">
					<ul style="padding:0;">
						<li class="innerList"><a href="forms2.html">forms2</a></li>
						<li class="innerList"><a href="forms3.html">forms3</a></li>
					</ul>
				</li>
				<li class="dropDownTrigger"><a href="#">forms</a></li>
				<li><a href="youTube.html">youTube</a></li>
				<li class="dropDown">
					<ul style="padding:0;">
						<li class="innerList"><a href="getData2.html">getData1</a></li>
						<li class="innerList"><a href="getData2.html">getData2</a></li>
						<li class="innerList"><a href="getData3.html">getData3</a></li>
					</ul>
				</li>
        <li class="dropDownTrigger"><a href="#">getData</a></li>
				<li><a href="trucks.html">trucks</a></li>
				<li><a href="pokemon.html">pokemon</a></li>
			</ul>
		</div>
		<div class="right-nav-container">
			<!-- <ul>
				<li> -->
				<form>
					<label for="searchBar">search</label>
					<input type="search" class="searchInput" id="searchBar" name="search" />
				</form>
				<!-- </li>
			</ul> -->
		</div>
	</nav>
	<div class="container">
		<div class="col col1"></div>
		<div class="col col2"> </div>
		<div class="col col3"> </div>
	</div>
	<br />
	<div class="form-container">
		<h3>Awesome Forms</h3>
		<form action="/forms" method="post">
		<h3>regular form</h3>
			<fieldset>
				<div>
					<label for="name" class="title">Name:</label>
					<input type="text" id="name" name="name" />
				</div>
				<div>
					<label for="email" class="title">Email:</label>
					<input type="email" id="email" name="email" />
				</div>
				<div class="radio-buttons">
					<span class="title">Gender:</span>
					<input type="radio" name="gender" id="male" value="M" />
					<label for="male">M</label>
					<input type="radio" name="gender" id="female" value="F" />
					<label for="female">F</label><br />
				</div>
				<div class="submit">
					<input type="submit" value="Register" id="submitF" />
					<!-- <button value="Register" id="submitF" /> -->
				</div>
			</fieldset>
		</form>

		<form id="postForm">
		<h3>post form with xmlHTTP</h3>
			<fieldset>
				<div>
					<label for="name2" class="title">Name:</label>
					<input type="text" id="name2" name="name" />
				</div>
				<div>
					<label for="email2" class="title">Email:</label>
					<input type="email" id="email2" name="email" />
				</div>
				<div class="radio-buttons">
					<span class="title">Gender:</span>
					<input type="radio" name="gender" id="male2" value="M" />
					<label for="male2">M</label>
					<input type="radio" name="gender" id="female2" value="F" />
					<label for="female2">F</label><br />
				</div>
				<div class="submit">
					<input type="submit" value="Register" id="submitF2" />
					<!-- <button value="Register" id="submitF" /> -->
				</div>
			</fieldset>
		</form>

	</div>
	<script type="text/javascript" src="js/index.js"></script>
	<script>
		let form = document.getElementById('postForm');
		let nameInForm = document.getElementById('name2');
		let emailInForm = document.getElementById('email2');
		let genderInForm = document.getElementsByName('gender');


		form.addEventListener('submit', function() {
			let name = nameInForm.value;
			let email = emailInForm.value;
			let gender = '';
			for(let selection of genderInForm) {
				if (selection.checked) gender = selection.value;
			}
			let sendObject = { name, email, gender };
			postData(sendObject);
		}, true);

		function postData(data) {
			let xhr = new XMLHttpRequest();
			xhr.open('POST', '/forms', true);
			xhr.setRequestHeader('Content-Type', 'application/json')
			xhr.onreadystatechange = () => {
				if(xhr.readyState === 4 && xhr.status === 200) {
					console.log('form response: ', xhr.responseText);
				}
			}
			xhr.send(JSON.stringify(data));
		}

	</script>
	<script type="text/javascript" src="js/dropdown.js"></script>
</body>
</html>
